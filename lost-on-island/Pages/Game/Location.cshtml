@page
@model lost_on_island.Pages.Game.LocationModel
@{
}

<h1>@Model.CurrentLocation.Title</h1>
<img src="@Url.Content("~/" + Model.CurrentLocation.ImagePath)" alt="Location image" />

<p>@Model.CurrentLocation.Description</p>


<div class="card-pack">
    @foreach (var card in Model.LocationCards)
    {
        <div class="card">
            <h3>@card.Title</h3>
            <p>ID: @card.Id</p>
            <p>Šance: @card.Probability%</p>
            <p>@card.Description</p>
            <p>Item type: @card.Item</p>
            <p>+ @card.ItemAdd</p>
            <img src="@card.Img" alt="Card Image" />
            <button asp-page-handler="HandleCardClick">Click and try</button>
        </div>
    }
</div>

<script>
    /*
    function handleCardClick(cardId) {
        // Use AJAX to send a POST request to the server
        fetch(`/Game/Location?handler=HandleCardClick&cardId=${cardId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            // Update the message on the page
            document.getElementById('message').innerText = data.message;
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }
    */
</script>


@foreach (var connection in Model.AvailableConnections)
{
    <a asp-page="/Game/Location" asp-route-locationId="@connection.ToLocationId">@connection.Description</a>
}